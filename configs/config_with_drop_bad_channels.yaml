pipeline:
  - name: concatenate_recordings

  - name: set_montage
    montage: standard_1020

  - name: bandpass_filter
    l_freq: 0.1
    h_freq: 40.0

  - name: notch_filter
    freqs: [50.0, 100.0]

  - name: resample
    instance: raw
    sfreq: 250.0
    npad: auto

  - name: find_events
    get_events_from: annotations
    shortest_event: 1

  - name: epoch
    tmin: -0.2
    tmax: 1.2
    baseline: [null, 0.0]
    reject: null

  - name: find_bads_channels_threshold
    reject:
      eeg: 1.0e-4
    n_epochs_bad_ch: 0.5
    apply_on: ['epochs', 'raw']
  
  - name: find_bads_channels_variance
    instance: epochs
    apply_on: ['epochs', 'raw']
    zscore_thresh: 4
    max_iter: 2
  
  - name: find_bads_channels_high_frequency
    instance: epochs
    apply_on: ['epochs', 'raw']
    zscore_thresh: 4
    max_iter: 2
  
  - name: find_bads_epochs_threshold
    reject:
      eeg: 1.0e-4
    n_channels_bad_epoch: 0.1

  - name: reference
    instance: 'epochs'
    ref_channels: average

  # Drop bad channels instead of interpolating them
  - name: drop_bad_channels
    instance: epochs

  - name: reference
    instance: 'raw'
    ref_channels: average

  # Drop bad channels from raw data as well
  - name: drop_bad_channels
    instance: raw

  - name: save_clean_instance
    instance: epochs
    overwrite: true

  - name: save_clean_instance
    instance: raw
    overwrite: true

  - name: generate_json_report

  - name: generate_html_report
