pipeline:
  # Example configuration showing how to use excluded_channels parameter
  # to exclude specific channels (like Cz reference) from preprocessing steps
  
  - name: set_montage
    montage: standard_1020
  
  # Bandpass filter - excluding Cz from filtering to avoid reference problems
  - name: bandpass_filter
    l_freq: 0.5
    h_freq: 45.0
    excluded_channels: ['Cz']  # Exclude Cz from bandpass filtering
  
  # Notch filter - also excluding Cz
  - name: notch_filter
    freqs: [50.0, 100.0]
    excluded_channels: ['Cz']  # Exclude Cz from notch filtering
  
  - name: resample
    instance: raw
    sfreq: 250.0
    npad: 'auto'
  
  - name: find_events
    shortest_event: 1
  
  - name: epoch
    tmin: -0.2
    tmax: 0.8
    baseline: [null, 0.0]
    event_id: null
    reject: null
  
  # Find bad channels - excluding Cz from bad channel detection
  - name: find_bads_channels_threshold
    reject:
      eeg: 1.0e-4
    n_epochs_bad_ch: 0.5
    excluded_channels: ['Cz']  # Don't mark Cz as bad
  
  - name: find_bads_channels_variance
    instance: epochs
    zscore_thresh: 4
    max_iter: 2
    excluded_channels: ['Cz']  # Exclude Cz from variance analysis
  
  - name: find_bads_channels_high_frequency
    instance: epochs
    zscore_thresh: 4
    max_iter: 2
    excluded_channels: ['Cz']  # Exclude Cz from high-frequency analysis
  
  # Find bad epochs - excluding Cz from epoch rejection criteria
  - name: find_bads_epochs_threshold
    reject:
      eeg: 1.0e-4
    n_channels_bad_epoch: 0.1
    excluded_channels: ['Cz']  # Don't use Cz for epoch rejection
  
  # After bad channel detection, re-reference to average
  - name: reference
    instance: epochs
    ref_channels: average
  
  - name: interpolate_bad_channels
    instance: epochs
  
  - name: save_clean_instance
    instance: epochs
    overwrite: true
  
  - name: generate_json_report
  
  - name: generate_html_report
